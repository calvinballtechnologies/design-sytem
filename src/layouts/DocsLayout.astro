---
import Sidebar from '../components/Sidebar';
import '../styles/index.css';

interface Props {
  title: string;
  activePath: string;
}

const { title, activePath } = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} | KJ Design System</title>
    <style is:global>
      .prose {
        color: var(--text-primary);
        max-width: 860px;
        line-height: 1.7;
        font-size: 15px;
        letter-spacing: -0.01em;
      }

      /* Page title injected from frontmatter */
      .docs-title {
        font-size: 2.25rem;
        font-weight: 700;
        letter-spacing: -0.03em;
        color: var(--text-primary);
        margin: 0 0 var(--spacing-2) 0;
        line-height: 1.2;
      }
      .docs-description {
        font-size: 1.05rem;
        color: var(--text-secondary);
        margin: 0 0 var(--spacing-6) 0;
        line-height: 1.6;
      }

      /* Headings */
      .prose h1 {
        font-size: 2rem;
        font-weight: 700;
        letter-spacing: -0.025em;
        margin: var(--spacing-10, 2.5rem) 0 var(--spacing-4) 0;
        color: var(--text-primary);
        line-height: 1.25;
      }
      .prose h2 {
        font-size: 1.4rem;
        font-weight: 650;
        letter-spacing: -0.02em;
        margin: var(--spacing-10, 2.5rem) 0 var(--spacing-4) 0;
        padding-bottom: var(--spacing-3);
        border-bottom: 1px solid var(--border-primary);
        color: var(--text-primary);
        line-height: 1.3;
      }
      .prose h3 {
        font-size: 1.15rem;
        font-weight: 600;
        letter-spacing: -0.01em;
        margin: var(--spacing-8) 0 var(--spacing-2) 0;
        color: var(--text-primary);
        line-height: 1.4;
      }

      /* Body text */
      .prose p {
        margin: var(--spacing-3) 0;
      }
      .prose strong {
        font-weight: 600;
        color: var(--text-primary);
      }

      /* Links */
      .prose a {
        color: var(--primary-1);
        text-decoration: none;
        font-weight: 500;
        border-bottom: 1px solid transparent;
        transition: border-color 0.15s ease, color 0.15s ease;
      }
      .prose a:hover {
        border-bottom-color: var(--primary-1);
      }

      /* Lists */
      .prose ul, .prose ol {
        padding-left: var(--spacing-6);
        margin: var(--spacing-4) 0;
      }
      .prose li {
        margin: var(--spacing-1-5, 6px) 0;
        line-height: 1.65;
      }
      .prose li::marker {
        color: var(--text-tertiary);
      }

      /* Inline code */
      .prose code {
        font-family: 'SF Mono', 'Fira Code', 'Fira Mono', 'Roboto Mono', ui-monospace, monospace;
        background: var(--bg-hover);
        padding: 2px 7px;
        border-radius: var(--border-radius-default);
        font-size: 0.85em;
        color: var(--text-primary);
        border: none;
      }

      /* Code blocks */
      .prose pre {
        border-radius: var(--border-radius-lg);
        padding: var(--spacing-5, 1.25rem);
        overflow-x: auto;
        margin: var(--spacing-5, 1.25rem) 0;
        border: 1px solid var(--border-primary);
        line-height: 1.6;
      }
      .prose pre code {
        background: transparent;
        padding: 0;
        font-size: 0.82rem;
        color: inherit;
        border: none;
      }

      /* Tables */
      .prose table {
        width: 100%;
        border-collapse: collapse;
        margin: var(--spacing-5, 1.25rem) 0;
        font-size: 0.875rem;
        overflow: hidden;
        border-radius: var(--border-radius-md);
        border: 1px solid var(--border-primary);
      }
      .prose thead {
        background: var(--bg-tertiary);
      }
      .prose th {
        padding: var(--spacing-2-5, 10px) var(--spacing-4);
        text-align: left;
        font-weight: 600;
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        color: var(--text-secondary);
        border-bottom: 1px solid var(--border-primary);
      }
      .prose td {
        padding: var(--spacing-2-5, 10px) var(--spacing-4);
        border-bottom: 1px solid var(--border-primary);
        color: var(--text-primary);
      }
      .prose tbody tr:last-child td {
        border-bottom: none;
      }

      /* Blockquotes */
      .prose blockquote {
        border-left: 3px solid var(--primary-1);
        padding: var(--spacing-3) var(--spacing-4);
        margin: var(--spacing-5, 1.25rem) 0;
        background: var(--bg-tertiary);
        border-radius: 0 var(--border-radius-default) var(--border-radius-default) 0;
        color: var(--text-secondary);
        font-style: italic;
      }
      .prose blockquote p {
        margin: 0;
      }

      /* Horizontal rules */
      .prose hr {
        border: none;
        border-top: 1px solid var(--border-primary);
        margin: var(--spacing-10, 2.5rem) 0;
      }
    </style>
  </head>
  <body class="kj-reset kj-font light" style="margin: 0; background: var(--bg-primary); color: var(--text-primary);">
    <div id="app-root" style="min-height: 100vh; display: flex;">
      <Sidebar client:load activePath={activePath} />
      <main style="flex: 1; padding: var(--spacing-8, 2rem); overflow: auto;">
        <div style="max-width: 1400px; margin: 0 auto;">
          <div class="prose">
            <slot />
          </div>
        </div>
      </main>
    </div>
    <script is:inline>
      (function() {
        var saved = localStorage.getItem('kj-theme') || 'light';
        var map = { light: 'light', dark: 'neutral-dark', leaf: 'leaf' };
        document.body.className = 'kj-reset kj-font ' + (map[saved] || 'light');
        document.body.style.background = 'var(--bg-primary)';
        document.body.style.color = 'var(--text-primary)';
      })();
    </script>
  </body>
</html>
